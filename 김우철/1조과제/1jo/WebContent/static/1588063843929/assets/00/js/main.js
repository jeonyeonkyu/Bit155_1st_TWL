var WOS=window.WOS||{};!function(a){a.extend(!0,WOS,{Register:function(b){return a(function(){b.init&&b.init()}),b},Poll:function(a,b){var c,b=b||200;return function(){var d=this,e=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(d,Array.prototype.slice.call(e))},b)}},ParseUri:function(a){function b(a){for(var c=b.options,d=c.parser[c.strictMode?"strict":"loose"].exec(a),e={},f=14;f--;)e[c.key[f]]=d[f]||"";return e[c.q.name]={},e[c.key[12]].replace(c.q.parser,function(a,b,d){b&&(e[c.q.name][b]=d)}),e}return b.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},b(a)}}),a.extend(!0,WOS,{Utilities:{DetectIEOlderThan9:WOS.Register(function(){function a(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var b=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(b)&&(a=parseFloat(RegExp.$1))}return a}function b(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var b=navigator.userAgent;null!=new RegExp("Trident/([0-9]{1,}[.0-9]{0,})").exec(b)&&(a=parseFloat(RegExp.$1))}return a}return{init:function(){function c(){var c=a(),d=b();return c>-1&&c<9&&d<5}Modernizr.addTest("ieOlderThan9",c)}}}())},Components:{Accordions:WOS.Register(function(){return{init:function(){var b=WOS.ParseUri(window.location).anchor;if(!/add|edit|promotion|choose\-condiments/.test(b)){var c=b?"#"+b:".collapse:first";a(".showall-accordion").on("click",function(){a(".collapse").collapse("show")}),a(".hideall-accordion").on("click",function(){a(".collapse.in").collapse("hide")}),a(".accordion").on("shown.bs.collapse",function(b){a(document).trigger("accordion.shown");a(b.target).parents(".panel").find(".accordion-state").removeClass("accordion-state-collapsed").addClass("accordion-state-expanded"),a(b.target).parents(".faq-row").find(".accordion-state").removeClass("accordion-faq-collapsed").addClass("accordion-faq-expanded")}).on("hidden.bs.collapse",function(b){a(b.target).parents(".panel").find(".accordion-state").removeClass("accordion-state-expanded").addClass("accordion-state-collapsed"),a(b.target).parents(".faq-row").find(".accordion-state").removeClass("accordion-faq-expanded").addClass("accordion-faq-collapsed")}).find(c).collapse()}}}}()),EqualHeights:WOS.Register(function(){return{init:function(){function b(){a("[data-equal-height]").each(function(){var b=a(this),c=b.data("equal-height").split(",");a.each(c,function(a,c){b.find(c).equalHeights()})})}a(window).on("load",b),a(document).on("accordion.shown",b),a(".modal").on("shown.bs.modal",b)}}}()),ScrollToTop:WOS.Register(function(){return{init:function(){a("#back-to-top").length&&a(window).scroll(function(){a(this).scrollTop()>100?a("#back-to-top").fadeIn():a("#back-to-top").fadeOut()}),a("#back-to-top").click(function(){return a("body,html").animate({scrollTop:0},800),!1})}}}()),InlineNotification:WOS.Register(function(){return{init:function(){a(".inline-alert").on("click","[data-hide]",function(){a(this).parents(".inline-alert").addClass("hidden")}),a("[data-delay-show]").each(function(){var b=a(this),c=parseInt(b.data("delay-show"),10);b.data("alert-type");setTimeout(function(){b.is(".inline-alert")?(b.removeClass("hidden"),a(document).trigger("shown.wos.alertinline",[b])):b.is(".modal-alert")&&b.modal("show").on("shown.bs.modal",function(){a(document).trigger("shown.wos.alertmodal",[b])})},c)})}}}()),Timers:WOS.Register(function(){return{init:function(){a(document).on("shown.wos.alertinline shown.wos.alertmodal shown.wos.modalwithtimer",function(b,c){var d=c.find(".timer");if(d.length){var e=parseInt(d.data("countdown-time"),10),f=d.data("countdown-redirect-url"),g=d.data("countdown-redirect-modal"),h=d.data("countdown-layout")?d.data("countdown-layout"):"{mn}:{snn}";d.countdown({until:e,compact:!0,format:"MS",onExpiry:function(){a(this).parents(".modal").one("hidden.bs.modal",function(){setTimeout(function(){a(g).modal("show")},5)}).modal("hide"),f&&(window.location=f)},layout:h})}})}}}()),Alerts:WOS.Register(function(){return{init:function(){a("[data-switch-modal]").each(function(){var b=a(this),c=b.data("switch-modal");b.on("click",function(){b.parents(".modal").one("hidden.bs.modal",function(){setTimeout(function(){a(c).modal("show")},5)}).modal("hide")})}),a(".modal-hastimer").on("shown.bs.modal",function(){a(document).trigger("shown.wos.modalwithtimer",[a(this)])}),a(".modal-alert").on("click","[data-dismiss-trigger]",function(b){var c=a(this),d=c.parents(".modal-alert"),e=c.data("dismiss-trigger");d.one("hidden.bs.modal",function(){a(document).trigger(e)}).modal("hide")}),a(".modal-login").on("click","[data-dismiss-trigger]",function(b){var c=a(this),d=c.parents(".modal-login"),e=c.data("dismiss-trigger");d.one("hidden.bs.modal",function(){a(document).trigger(e)}).modal("hide")}),a(".inline-alert").on("click",function(b){var c=a(this).data("dismiss-trigger");c&&a(document).trigger(c)}),a(".alert-dismissable").on("closed.bs.alert",function(){var b=a(this).data("dismiss-trigger");b&&a(document).trigger(b)})}}}()),MainNavigation:WOS.Register(function(){return{init:function(){a("#trackOrder").on("show.bs.modal",function(b){a("#form_trackOrder_orderNum").val("")})}}}()),SideNavigation:WOS.Register(function(){return{init:function(){a(window).on("load",function(){var b=a("[data-sticky]").length;a(".page-menu-category").length&&a(".primary-menu-item.selected").length>1&&(b=!1),b&&a(".main").stickem({item:"[data-sticky]",container:".main",stickClass:"sticky-top sticking",endStickClass:"sticky-bottom sticking"})})}}}()),Popovers:WOS.Register(function(){return{init:function(b){var b=a(b?b:document.body),c=a(window).scrollTop();b.popover({selector:'[data-toggle="popover"]'}).on("click",function(d){c=a(window).scrollTop(),b.find('[data-toggle="popover"], [data-toggle="html-popover"]').each(function(){a(this).on("remove",function(){a(this).popover("hide")}),a(this).is(d.target)||0!==a(this).has(d.target).length||0!==a(".popover").has(d.target).length||a(this).popover("hide")})}),b.on("click",'[data-toggle="popover"], [data-toggle="html-popover"]',function(c){a(this).is("a")&&c.preventDefault(),b.find('[data-toggle="popover"], [data-toggle="html-popover"]').not(this).popover("hide")}),b.find('[data-toggle="html-popover"]').each(function(){var b=a(this),c=b.data("content-traverse")?b.data("content-traverse"):"next",d=b.data("content-selector")?b.data("content-selector"):b.attr("href");b.popover({content:function(){return b[c](d).html()},html:!0})}),a(window).on("scroll",function(d){c!==a(window).scrollTop()&&b.find('[data-toggle="popover"], [data-toggle="html-popover"]').filter('[data-container="body"]').popover("hide")}),a(window).on("resize",function(){b.find('[data-toggle="popover"], [data-toggle="html-popover"]').popover("hide")})}}}()),QuantityInput:WOS.Register(function(){return{init:function(b,c){var b=a(b?b:document.body),d=a.extend(!0,{inputMask:{placeholder:""}},c);b.find(".item-quantity-picker").inputNumber(d)}}}())},Forms:{Validation:WOS.Register(function(){return{init:function(){function b(a,b,c){var d=!0;if(isNaN(a)||isNaN(b)||isNaN(c))return!1;if((b<1||b>12)&&(d=!1),(c<1||c>31)&&(d=!1),4!=b&&6!=b&&9!=b&&11!=b||31!=c||(d=!1),2==b){var e=a%4==0&&(a%100!=0||a%400==0);(c>29||29==c&&!e)&&(d=!1)}return d}a.validator.setDefaults({ignore:'[type="hidden"]',highlight:function(b,c){a(b).closest(".form-group").removeClass("form-group-success").addClass("form-group-error")},unhighlight:function(b,c){a(b).closest(".form-group").removeClass("form-group-error form-group-success")},success:function(b,c){a(c).closest(".form-group").removeClass("form-group-error").addClass("form-group-success")},errorPlacement:function(b,c){if(c.parent(".placeholder-wrapper").length)b.insertBefore(c.parent(".placeholder-wrapper"));else if(c.hasClass("input-group-form-control"))b.insertBefore(c.parents(".input-group, .input-row"));else if(c.hasClass("form-control")||c.hasClass("list-group-form-control"))b.insertBefore(c);else if(c.is(":radio")&&c.parent().parent().hasClass("radio-button-group"))b.insertBefore(c.parent());else if(c.is(":checkbox")){var d=c.parents(".checkbox"),e=d.find(".checkbox-label");e.append(b)}else if(c.is(":radio")&&c.closest("table").hasClass("table-payment-mycards"))b.insertBefore(c.closest(".table-payment-mycards"));else if(c.is(":radio")){var d=c.parents(".radio"),e=d.find(".radio-label");a(".error-container").append(b)}else if(c.data("error-label-target")&&c.data("error-label-target").length){var f=a(c.data("error-label-target"));f.append(b)}else c.hasClass("hide-default-error")||b.insertAfter(c)},errorContainer:".error-container"}),a.validator.addMethod("verifyPassword",function(a,b){var c=/^.*((?=.*\d)(?=.*[a-z]).{8}).*$/;return this.optional(b)||c.test(a)}),a.validator.addMethod("verifyPhoneNo",function(a,b){var c=/^([0-9]{8}|[0-9]{10})$/;return this.optional(b)||c.test(a)}),a.validator.addMethod("verifyMobileNo",function(a,b){var c=/(^[89]\d{7}$)/;return this.optional(b)||c.test(a)}),a.validator.addMethod("verifySpecialCharacters",function(a,b){var c=/^([^~`@\*\$%\^&_\'\"=\|;><\{\}\\\/\(\)\-]*)$/;return this.optional(b)||c.test(a)}),a.validator.addMethod("verifyUserName",function(a,b){var c=/^(?=.*[a-zA-Z\.\!@#\$\%&\*\+\-\?\^_])([a-zA-Z0-9\.\!@#\$\%&\*\+\-\?\^_]+)$/;return this.optional(b)||c.test(a)}),a.validator.addMethod("ifFilledRemoveDisabled",function(b,c,d){return a("#"+d).on("change",function(){return a("#"+d).val().length>0?(a("."+d).prop("disabled",!1),!0):(a("."+d).prop("disabled",!0),!0)}),b.length>0?(a("."+d).prop("disabled",!1),!0):(a("."+d).prop("disabled",!0),!0)}),a.validator.addMethod("verifyIfNotEmpty",function(a,b,c){if(a.length>0){return/^[A-Za-z0-9]+$/.test(a)}return!0}),a.validator.addMethod("verifyIfFilled",function(b,c,d){if(0!==a(d).val().length){var e=/^[A-Za-z0-9]+$/,f=/^$|\s+/;return e.test(b)?!f.test(b):e.test(b)}return!0}),a.validator.addMethod("verifyCCExpiryDate",function(b,c){var d=this.optional(c);if(d)return d;var e=!0,f=((new Date).getMonth(),(new Date).getFullYear(),new Date),g=new Date,h=a("#form_order_payment_creditcard_expiry_month").val(),i=a("#form_order_payment_creditcard_expiry_year").val();return g.setFullYear(i,h,1),g<f?e=!1:a("#form_order_payment_creditcard_expiry_month").val()||(e=!1),e},"Please enter a valid date."),a.validator.addMethod("verifyDOB",function(c,d){console.log("verifyDOB",c,d);var e=this.optional(d);return e||b(parseInt(a(".selectdate-year option:selected").val(),10),parseInt(a(".selectdate-month option:selected").val(),10),parseInt(a(".selectdate-day option:selected").val(),10))},"Please enter a valid date."),a.validator.addMethod("remote",function(b,c,d){if(this.optional(c))return"dependency-mismatch";var e,f,g=this.previousValue(c);return this.settings.messages[c.name]||(this.settings.messages[c.name]={}),g.originalMessage=this.settings.messages[c.name].remote,this.settings.messages[c.name].remote=g.message,d="string"==typeof d&&{url:d}||d,g.old===b?g.valid:(g.old=b,e=this,this.startRequest(c),f={},f[c.name]=b,a.ajax(a.extend(!0,{url:d,mode:"abort",port:"validate"+c.name,dataType:"json",data:f,context:e.currentForm,success:function(d){var f,h,i,j=!0===d||"true"===d||!0===d.valid;e.settings.messages[c.name].remote=g.originalMessage,j?(i=e.formSubmitted,e.prepareElement(c),e.formSubmitted=i,e.successList.push(c),delete e.invalid[c.name],e.showErrors()):(f={},h=d.message||d||e.defaultMessage(c,"remote"),f[c.name]=g.message=a.isFunction(h)?h(b):h,e.invalid[c.name]=!0,e.showErrors(f)),g.valid=j,e.stopRequest(c,j)}},d)),"pending")}),a(document).on("change","select",function(b){try{a(b.target).valid()}catch(c){}})}}}()),CustomSelect:WOS.Register(function(){function b(a,b){var c=a,d=[{find:/^([^\-]+) \- /g,replace:'<span class="ui-selectmenu-item-header">$1</span>'}];for(var e in d)c=c.replace(d[e].find,d[e].replace);return c}function c(){var c=a(this).attr("class");a(this).selectmenu({format:b,width:a(this).innerWidth()}).selectmenu("widget").addClass(c)}function d(){a(this).data("ui-selectmenu")&&a(this).selectmenu("destroy")}return{init:function(b){function e(){a(window).one("resize",function(){b.find("select").each(function(){a(this).trigger("select:resize")}),setTimeout(e,50)})}var b=a(b?b:document.body),f=b.find("select:not(.with-search)");f.each(c),a(document).add(".modal").on("scroll",WOS.Poll(function(b){f.each(function(){a(this).data("ui-selectmenu")&&void 0!=b.currentTarget.id&&a(this).selectmenu("close")})},15)),a(".modal").one("shown.bs.modal",function(b){a(b.target).find("select:not(.with-search)").each(function(){d.call(this),c.call(this)})}),b.find("select.with-search").each(function(){var b=a(this),c=b.data("no-results-text");b.chosen({disable_search_threshold:2,width:"100%",no_results_text:c})}),b.find("select[data-getchoices-url]").each(function(){var b=a(this),c=b.data("getchoices-url"),d=a(b.data("getchoices-based-on"));d.on("change",function(e){b.prop("disabled",!0),b.val(""),b.trigger("select:refresh");var f=(a(e.target).val(),{}),g=d.serializeArray();a.each(g,function(a,b){f[b.name]=b.value}),a.ajax(c,{data:f,success:function(c,e,f){var g=['<option value=""></option>'];a.each(c,function(a,b){g.push(['<option value="'+b.value+'">',b.label,"</option>"].join(""))}),b.html(g.join("")).data("choices-length",c.length).trigger("select:refresh");var h=!0;a(d).each(function(b){a(this).val().length>0||(h=!1)}),h?(b.prop("disabled",!1),b.trigger("select:refresh")):(b.prop("disabled",!0),b.trigger("select:refresh"))}})})}),b.find("select").on("select:refresh",function(){a(this).is(".with-search")?a(this).trigger("chosen:updated"):(d.call(this),c.call(this))}).on("select:resize",function(){a(this).is(".with-search")||(d.call(this),c.call(this))}),b.find("select[data-getchoices-url]").each(function(){var b=a(this);b.val().length>0?b.prop("disabled",!1):b.prop("disabled",!0),b.trigger("select:refresh")}),e()},render:c,destroy:d}}()),InputStates:WOS.Register(function(){return{init:function(b){var b=a(b?b:document.body);b.find('input[type="checkbox"], input[type="radio"]').iCheck({checkboxClass:"icheckbox",radioClass:"iradio"}).on("ifChanged",function(b){a(b.target).valid()}),b.find(".panel-selectable").on("click",function(b){var c=a(this),d=c.data("panel-input-name"),e=a('[name="'+d+'"]:hidden'),f=a('.panel-selectable[data-panel-input-name="'+d+'"]'),g=c.data("panel-input-value");e.val(g),f.removeClass("panel-selectable-selected").filter(c).addClass("panel-selectable-selected")})}}}()),InstantToggle:WOS.Register(function(){return{init:function(){function b(b){a(b).parents(".form-group").show()}function c(b){var c=a(b);c.parents(".form-group").hide(),c.val("")}var d=a(d?d:document.body);d.find("[data-radio-toggling]").on("ifChecked",function(){var d=a(this).data("radio-toggling"),e=a(this).data("radio-toggle");c(d),b(e)}).filter(":first").iCheck("check")}}}()),Setup:WOS.Register(function(){return{init:function(){a("form").each(function(){var b=a(this),c=b.data("required-symbol");if(c){b.find('.form-control, select, input[type="radio"]').each(function(){var b=a(this);if(b.hasClass("required")||b.is("[data-rule-required]")){b.parents(".form-group").find(".field-label").prepend('<span class="required-symbol">'+c+"</span>")}})}}),a("[data-associated-form]").on("click",function(b){b.preventDefault();var c=a(this).data("associated-form");a(c).submit()})}}}()),InputRestrict:WOS.Register(function(){return{init:function(){a(".digit-only").on("keypress",function(a){var b=a.charCode?a.charCode:a.keyCode;if(8!=b&&9!=b&&(b<48||b>57))return!1}),a(".floating-digit-only").on("keypress",function(a){var b=a.charCode?a.charCode:a.keyCode;if(8!=b&&9!=b&&46!=b&&(b<48||b>57))return!1}),a(".no-special-characters").on("keypress",function(b){var c=void 0===b.which?b.keyCode:b.which,d=["96","126","33","64","35","36","37","94","38","39","34","44","46","63","92","95"];return!(a.inArray(String(c),d)>=0)})}}}()),InputPrefill:WOS.Register(function(){return{init:function(){a("[data-prefill]").on("focus",function(b){a(this).val()||a(this).val(a(this).data("prefill"))})}}}())},Pages:{Configurator:WOS.Register(function(){return{init:function(){a(window).on("scroll",WOS.Poll(function(){var b=a(document).scrollTop();a(".configurator-header")[b<30?"removeClass":"addClass"]("expanded")},25))}}}()),Home:WOS.Register(function(){return{init:function(){a(".home-masthead .slideshow").cycle({pagerTemplate:'<a href="#" class="slide-pager-target ir">{{slideNum}}</a>',slides:"> .slide-item",timeout:7e3,autoHeight:"container"})}}}()),OrderHistory:WOS.Register(function(){return{init:function(){a(".saveFav").on("click",function(b){b.preventDefault();var c=a(this).data("orderid");a("#addToFav").one("shown.bs.modal",function(){a('[name="form_addToFav_id"]').val(c)}).modal("show")})}}}())}})}(jQuery);