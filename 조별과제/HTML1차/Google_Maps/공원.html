<!-- 이 예제는 POI (관심 지점)에서 클릭 이벤트 리스너를 사용하는 방법을 보여줍니다. 
    POI 아이콘에서 click 이벤트를 수신 한 다음 길 찾기 서비스 .route 요청과 함께 이벤트 데이터의 placeId를 사용하여 
    클릭 한 장소에 대한 경로를 계산하고 표시합니다. 또한 placeId를 사용하여 장소에 대한 자세한 정보를 얻습니다. -->
<!DOCTYPE html>
<html>

<head>
    <title>공원</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <style>
        /* Always set the map height explicitly to define the size of the div
               * element that contains the map. */
        #map {
            height: 100%;
        }

        /* Optional: Makes the sample page fill the window. */
        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        .title {
            font-weight: bold;
        }

        #infowindow-content {
            display: none;
        }

        #map #infowindow-content {
            display: inline;
        }


        #sideNav {
            /* text-align: center; */
            position: fixed;
            top: 0;
            left: 0;
            display: block;
            width: 17rem;
            height: 100vh;
        }

        #sideNav .navbar-nav .nav-item .nav-link {
            font-weight: 800;
            letter-spacing: 0.05rem;
            text-transform: uppercase;
        }

        #sideNav .navbar-brand .img-profile {
            max-width: 4rem;
            max-height: 4rem;
            border: 0.5rem solid rgba(255, 255, 255, 0.2);
            margin-left: 10px;
        }

        #sideNav .navbar-collapse {
            display: flex;
            align-items: flex-start;
            flex-grow: 0;
            width: 100%;
            margin-bottom: auto;
        }

        #sideNav .navbar-collapse .navbar-nav {
            flex-direction: column;
            width: 100%;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-dark fixed-top" id="sideNav" style="background-color: #3b5998;">

        <a class="d-flex justify-content-center navbar-brand js-scroll-trigger" href="#page-top"
            style="margin-right:0;">
            <!-- <span class="d-lg-none"></span> -->
            <h3 class="mt-3">Google Maps</h3>
        </a>

        <div class="navbar-collapse mt-3">
            <ul class="navbar-nav nav-item">
                <li class="d-flex nav-item mx-auto">
                    <a class="nav-link js-scroll-trigger mb-2 mr-3" href="#">위&nbsp도</a>
                    <input type="text" id="lat" class="form-control" style="width:150px;" value="">
                </li>
                <li class="d-flex nav-item mx-auto">
                    <a class="nav-link js-scroll-trigger mb-2  mr-3" href="#">경&nbsp도</a>
                    <input type="text" id="lng" class="form-control" style="width:150px;" value="">
                </li>
                <!-- <li class="nav-item mx-auto">
                        <a class="nav-link js-scroll-trigger mb-2" href="./슬기/seulki.html">KU SEULKI</a>
                    </li> -->
            </ul>
        </div>

    </nav> <!-- nav -->

    <div id="map"></div>
</body>

<script>
    var input_lat = document.getElementById("lat");
    var input_lng = document.getElementById("lng");
    var map;
    var marker;
    var marker2, i;

    function initMap() {
        var origin = { lat: 37.503176, lng: 127.024883 };
        map = new google.maps.Map(document.getElementById('map'), {
            zoom: 18,
            center: origin
        });
        var clickHandler = new ClickEventHandler(map, origin);
        window.navigator.geolocation.getCurrentPosition(current_position);
        // console.log("여긴오냐");

      
    // for (i = 0; i < locations.length; i++) {
    //     marker2 = new google.maps.Marker({
    //         id: i,
    //         position: new google.maps.LatLng(locations[i][1], locations[i][2]),
    //         map: map
    //     });
    // }

    }

    function current_position(position) {
        var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

        var map_options = {
            center: latlng, zoom: 18,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            navigationControlOptions: { style: google.maps.NavigationControlStyle.SMALL }
        }

        var marker = new google.maps.Marker({ position: latlng, map: map, title: "You are here!" });
        var infowindow = new google.maps.InfoWindow({
            content: '현재위치'
        });
        infowindow.open(map, marker);

    }



    var ClickEventHandler = function (map, origin) {
        this.origin = origin;
        this.map = map;
        this.map.addListener('click', this.handleClick.bind(this));
    };

    ClickEventHandler.prototype.handleClick = function (event) {
        console.log('You clicked on: ' + event.latLng);
        input_lat.value = event.latLng.lat();
        input_lng.value = event.latLng.lng();
        console.log('lat : ' + event.latLng.lat());
        console.log('lng : ' + event.latLng.lng());
        placeMarker(map, event.latLng);
    }

    function placeMarker(map, location) {
        marker = new google.maps.Marker({
            position: location,
            map: map,
            icon: {
                url: "https://dev.w3.org/SVG/tools/svgweb/samples/svg-files/wireless.svg",
                scaledSize: new google.maps.Size(50, 50)
            },
            draggable: true,
            animation: google.maps.Animation.DROP
        });
        marker.addListener('click', toggleBounce);
        marker.addListener('blur', toggleBounce);
    }


    function toggleBounce() {
        if (marker.getAnimation() !== null) {
            marker.setAnimation(null);
        } else {
            marker.setAnimation(google.maps.Animation.BOUNCE);
        }
    }


    var locations = [
        ['명동', 37.563576, 126.983431],
        ['가로수길', 37.520300, 127.023008],
        ['광화문', 37.575268, 126.976896],
        ['남산', 37.550925, 126.990945],
        ['이태원', 37.540223, 126.994005]
    ];

   




</script>
<script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB967GKjoFZHapwWuYLDfvp3JQssSZzvkE&libraries=places&callback=initMap&sensor=true"
    async defer></script>
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
    crossorigin="anonymous"></script>

</html>