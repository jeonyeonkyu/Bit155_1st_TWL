<head>
    <meta charset="UTF-8">
    <title>Insert title here</title>
    <!--https://8oi9s0nnth.apigw.ntruss.com/corona19-masks/v1/storesByAddr/json-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>


    <script>
	
        // let publicAPI = "https://8oi9s0nnth.apigw.ntruss.com/corona19-masks/v1/storesByAddr/json?";
        // let data = { address: "서울특별시 강남구" };
		
        let plenty = 0;
        let some = 0;
        let few = 0;
        let empty = 0;
        let none = 0;

        $(function () {
        	$('#btn').click(function(){
    			$.ajax(
    					 {
    						 type:"get",
    						 url:"/chartViewok.do",
    						 dataType:"json", //POINT
    						 success:function(data){
    							console.log("오니"+data); 
    							$.each(data,function(index,obj){
    								console.log("오니"+obj);
    								
    								/* $('#emplist').append(
    								   "<tr><td>" + index + "</td><td>"	+ obj.empno + "</td><td>"
    								   +obj.ename + "</td><td>" + obj.sal + "</td><td>" + obj.job +
    								   "</td><td>" + obj.comm + "</td></tr>"
    								); */
    							});
    							
    						 },
    						 error:function(xhr){
    							 alert(xhr.status + ":ERROR");
    						 }
    					 }
    			
    			      );
    		});

                        // console.log(plenty);
                        // console.log(some);
                        // console.log(few);
                        // console.log(empty);
                        // console.log(none);
                        // console.log(Number(plenty);
                        console.log("킹받네")
                        var ctx = $('#myChart').get(0).getContext("2d");
                        var myChart = new Chart(ctx, {
                            type: 'horizontalBar',//차트타입
                            data: {
                                labels: ["plenty", "some", "few", "empty", "none"], //차트에 들어갈 라벨명
                                datasets: [{
                                	labels: ["plenty", "some", "few", "empty", "none"], //범례?
                                    data: [Number(plenty), Number(some), Number(few), Number(empty), Number(none)],
                                    // data: [5, 10, 3, 1, 10],
                                    backgroundColor: [
                                        'rgba(244,99,132,0.2)',
                                        'rgba(54,162,235,0.2)',
                                        'rgba(255,206,86,0.2)',
                                        'rgba(75,192,192,0.2)',
                                        'rgba(153,102,255,0.2)',
                                        'rgba(255,159,64,0.2)',
                                    ],
                                    hoverBorderWidth:[
                                        '5',
                                        '5',
                                        '5',
                                        '5',
                                        '5'

                                    ],
                                    hoverBackgroundColor:[
                                        'rgba(244,99,135)',
                                        'rgba(54,162,232)',
                                        'rgba(255,206,8)',
                                        'rgba(75,192,193)',
                                        'rgba(153,20.75)',
                                        'rgba(255,159,5)',
                                    ]

                                }],
                                
                            },
                            options: { //타이틀 속성 부여
                                        title: {
                                            display: true,
                                            text: "직업별 평균 급여",
                                            position: 'top',
                                            fontsize: 1000,
                                        },
                                        legend:{
                                        	display:true,
                                        	 labels: ["plenty", "some", "few", "empty", "none"] //차트에 들어갈 라벨명
                                        }
                                        },
                                        
                                        
                                    
                        })

                        
                
                })//function(data) 끝

       
        

    </script>

</head>


<body>

    <div style="width: 85%">
        <canvas id="myChart"></canvas></div>
</body>

</html>