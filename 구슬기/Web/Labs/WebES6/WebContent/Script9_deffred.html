
<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script type="text/javascript">
	/*
	// ##################### 화살표함수 START ################################################
	// https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Functions/%EC%95%A0%EB%A1%9C%EC%9A%B0_%ED%8E%91%EC%85%98
	function callBackTest1(arg){
	    console.log("callBackTest1 start - " + arg);
	    var def = $.Deferred();
	    setTimeout( ()=> {
	        console.log("callBackTest1 setTimeout Call"); 
	        def.resolve("callBackTest1 성공");
	    }, 2000); // 성공테스트    
	        
	    console.log("callBackTest1 end");    
	    return def.promise();
	}
	function callBackTest2(arg){
	    console.log("callBackTest2 start - " + arg);
	    var def = $.Deferred();
	    setTimeout( ()=> {
	        console.log("callBackTest2 setTimeout Call"); 
	        def.resolve("callBackTest2 성공");
	    }, 3000);        
	    console.log("callBackTest2 end");
	    return def.promise();
	}
	function callBackTest3(arg){
	    console.log("callBackTest3 start - " + arg);    
	       var def = $.Deferred();
	    setTimeout( ()=> {
	        console.log("callBackTest3 setTimeout Call"); 
	        def.reject("callBackTest3 실패")
	    }, 4000); // reject : 실패    
	    console.log("callBackTest3 end");
	    return def.promise();
	}
	// ##################### 화살표함수 END ################################################
	*/
	 
	 
	 
	 
	 
	 
	function callBackTest1(arg){
	    console.log("callBackTest1 start - " + arg);
	    var def = $.Deferred();
	 
	    setTimeout( function(){ 
	        console.log("callBackTest1 setTimeout Call");
	        def.resolve("callBackTest1 성공")
	    }, 3000); // 성공테스트
	 
	    console.log("callBackTest1 end");
	    return def.promise();
	}
	 
	function callBackTest2(arg){
	    console.log("callBackTest2 start - " + arg);
	    var def = $.Deferred();
	 
	    setTimeout( function(){ 
	        console.log("callBackTest2 setTimeout Call");
	        def.resolve("callBackTest2 성공")
	    }, 3000);
	 
	    console.log("callBackTest2 end");
	    return def.promise();
	}
	 
	function callBackTest3(arg){
	    console.log("callBackTest3 start - " + arg);
	    var def = $.Deferred();
	 
	    setTimeout( function(){ 
	        console.log("callBackTest1 setTimeout Call");
	        def.reject({"RESULT_CODE":"FAIL", "RESULT_MSG":"callBackTest3 Fail"}) // reject : 실패
	    }, 3000); 
	 
	    console.log("callBackTest3 end");
	    return def.promise();
	}
	 
	 
	 
	 
	function success(arg){
	    console.log("success - " + arg);
	}
	 
	function error(arg){
	    console.log("error - " + arg);
	}
	 
	function fail(arg){
	    console.log("fail - " + arg);
	}
	 
	function done(arg){
	    console.log("done - " + arg);
	}
	 
	function always(arg){
	    console.log("always - " + arg);
	}
	 
	 
	 
	 
	 
	 
	 
	/* 
	###################################################
	    순차실행
	###################################################
	*/
	console.log("test call start");
	//callBackTest1("야홓").then(callBackTest2).then(success, error).done(done).always(always); // callBackTest1 -> callBackTest2 -> done -> always
	callBackTest1("야홓").then(callBackTest2).then(callBackTest3).then(success, error).done(done).always(always); // callBackTest1 -> callBackTest2 -> callBackTest3(reject) -> error -> always    (done 안탐)
	//callBackTest1("야홓").then(callBackTest2).then(callBackTest3).then(success, error).done(done).fail(fail).always(always); // callBackTest1 -> callBackTest2 -> callBackTest3(reject) -> error -> fail -> always    (done 안탐)
	//callBackTest1("야홓").then(callBackTest2).then(callBackTest3).fail(fail).done(done).always(always); // callBackTest1 -> callBackTest2 -> callBackTest3(reject) -> fail -> always    (done 안탐)
	//callBackTest1("야홓").then(callBackTest3).then(callBackTest2).fail(fail).done(done).always(always); // callBackTest1 -> callBackTest3(reject) -> fail -> always
	//callBackTest1("야홓").then(callBackTest3).then(callBackTest2, error).fail(fail).done(done).always(always); // callBackTest1 -> callBackTest3(reject) -> error -> fail -> always
	console.log("test call end");
	 
	 
	// 1.
	/*
	function whenSuccess(rs1, rs2){
	    console.log("when조건 성공");
	    console.log("##rs1 : " + rs1);
	    console.log("##rs2 : " + rs2);
	}
	*/
	 
	 
	// Parameter 미선언
	function whenSuccess(){
	    console.log("when조건 성공");
	    for(var i=0, maxLength=arguments.length; i<maxLength; i++){
	        console.log("##rs"+ i + " : " + arguments[i]);
	    }
	}
	function whenFail(rs){
	    console.log("when조건 실패");
	    console.log("##rs : " + JSON.stringify(rs));
	    console.log("rsCode : " + rs.RESULT_CODE);
	    console.log("rsMsg : " + rs.RESULT_MSG);
	}
	 
	 
	 
	 
	 
	/*
	###################################################
	    동시실행
	###################################################
	*/
	// callBackTest1, callBackTest2 동시에 Call - 성공테스트
	//$.when( callBackTest1("1111"), callBackTest2("2222") ).then(whenSuccess, whenFail); // 성공테스트
	// callBackTest1, callBackTest3 동시에 Call - 실패테스트
	// $.when( callBackTest1("1111"), callBackTest3("2222") ).then(whenSuccess, whenFail); // 실패테스트
	 


	</script>
</head>
<body>


</body>
</html>