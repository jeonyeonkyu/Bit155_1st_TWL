<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Ajax get() </title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script type="text/javascript">
	/*
		https://api.jquery.com/jQuery.get/
		https://www.w3schools.com/jquery/ajax_get.asp
		
		jQuery.get( url [, data ] [, success ] [, dataType ] )
		httReq.open("GET")  ,httReq.open("POST");
		
	*/
		$(function(){
			$('#btn').click(function(){
				$.get("Ex03_Company.xml",function(data){// success 의 콜백함수는 서버가 클라이언트에게 보낸 데이터를 받는다 //응답이 4번이라면 콜백함수를 탄다 
					//console.log(data); // data 는 서버에서 받은 xml 데이터 이다 
					//가공!! 은 내맘대로
					$('#display').empty(); //display 의 자식지워요   .. 넣기전에 안에 비우고 넣을라고 그러는거..
					console.log($(data).find('Company')); //기존 데이터에서 find() 함수를 사용, Company element 만 뽑는다 
														  //find() 필터 함수 >> return Array [Company, Company]
														  
														 $(data).find('Company').each(function(){
														  //$.each(function(){index,element} )  이방법도 있음 	 
															 
															 //each 를 돌리는데 data 로 받은 xml 에서 company로 받은 요소를 돌리겠다 
															 // console.log(this);//Company element 
															let entry = $(this);   // 이렇게 jQuery 로 만든 결과물을 변수에 넣을 수 있다.
															console.log(entry);
															/*
															<Company CompanyType="private">
															<CompanyName>Bit</CompanyName>
															<CompanyNumber>2019</CompanyNumber>
															<CompanyAddress>서울시 서초구</CompanyAddress>
															<Name/>
															</Company>   이제 이 데이터를 내 입맛대로 바꾸면 된다. 
															*/
															//가공 : 얼마나 이쁘게~ 얼마나 정확하게 원하는 내용을 잘 뽑아내냐~
															let html = "<div>" + entry.attr('CompanyType')+"</div>";
															html += "<div>" + entry.find('CompanyName').text() +"</div>";
															html += "<div>" + entry.find('CompanyNumber').text() +"</div>";
															html += "<div>" + entry.find('CompanyAddress').text() +"</div>";
															html += "<div>" + entry.find('Name').text() +"</div>";
															$('#display').append(html);
															
															//var companyarr =$(data).find('Company');
															//$.each(companyarr,function(index, obj){})  이런식으로도 사용이 가능하더라 
														 })
				})
			})
		});
	
	</script>
</head>
<body>
	<input type="button" id="btn" value="회사소개">
	<div id="display" style="background-color: lightpink">DATA</div>
</body>
</html>